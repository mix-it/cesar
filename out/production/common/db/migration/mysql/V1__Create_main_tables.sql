CREATE TABLE Article
(
    ID BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL,
    CONTENT LONGTEXT,
    HEADLINE VARCHAR(255),
    NBCONSULTS BIGINT NOT NULL,
    POSTEDAT DATETIME,
    TITLE VARCHAR(100),
    VALID BOOLEAN NOT NULL,
    AUTHOR_ID BIGINT NOT NULL
);
CREATE TABLE ArticleComment
(
    ID BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL,
    CONTENT LONGTEXT NOT NULL,
    POSTEDAT DATETIME NOT NULL,
    ARTICLE_ID BIGINT,
    MEMBER_ID BIGINT NOT NULL
);
CREATE TABLE Event
(
    ID BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL,
    CURRENT BOOLEAN NOT NULL,
    YEAR INTEGER NOT NULL
);
CREATE TABLE Authority
(
    ID BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL,
    NAME VARCHAR(50) NOT NULL
);
CREATE TABLE Interest
(
    ID BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL,
    NAME VARCHAR(50) NOT NULL
);
CREATE TABLE Member
(
    DTYPE VARCHAR(31) NOT NULL,
    ID BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL,
    COMPANY VARCHAR(100),
    EMAIL VARCHAR(250),
    FIRSTNAME VARCHAR(100),
    LASTNAME VARCHAR(100),
    LOGIN VARCHAR(100) NOT NULL,
    LONGDESCRIPTION LONGTEXT,
    NBCONSULTS BIGINT NOT NULL,
    PUBLICPROFILE BOOLEAN NOT NULL,
    REGISTEREDAT DATETIME,
    SHORTDESCRIPTION VARCHAR(300),
    TICKETINGREGISTERED BOOLEAN,
    LEVEL VARCHAR(255),
    LOGOURL VARCHAR(250),
    SESSIONTYPE VARCHAR(255)
);
CREATE TABLE Member_Event
(
    MEMBER_ID BIGINT NOT NULL,
    EVENTS_ID BIGINT NOT NULL,
    PRIMARY KEY (MEMBER_ID, EVENTS_ID)
);
CREATE TABLE Member_Interest
(
    MEMBER_ID BIGINT NOT NULL,
    INTERESTS_ID BIGINT NOT NULL,
    PRIMARY KEY (MEMBER_ID, INTERESTS_ID)
);
CREATE TABLE Session
(
    DTYPE VARCHAR(31) NOT NULL,
    ID BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL,
    ADDEDAT DATETIME,
    DESCRIPTION LONGTEXT NOT NULL,
    FEEDBACK BOOLEAN NOT NULL,
    FORMAT VARCHAR(255),
    GUEST BOOLEAN NOT NULL,
    IDEAFORNOW LONGTEXT,
    LANG VARCHAR(2) NOT NULL,
    LEVEL VARCHAR(255),
    MAXATTENDEES INTEGER,
    MESSAGEFORSTAFF LONGTEXT,
    NBCONSULTS BIGINT NOT NULL,
    SESSIONACCEPTED BOOLEAN,
    SUMMARY VARCHAR(300),
    TITLE VARCHAR(100) NOT NULL,
    VALID BOOLEAN NOT NULL,
    EVENT_ID BIGINT NOT NULL
);
CREATE TABLE SessionComment
(
    ID BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL,
    CONTENT LONGTEXT NOT NULL,
    POSTEDAT DATETIME NOT NULL,
    PRIVATE BOOLEAN,
    MEMBER_ID BIGINT NOT NULL,
    SESSION_ID BIGINT NOT NULL
);
CREATE TABLE Session_Interest
(
    SESSION_ID BIGINT NOT NULL,
    INTERESTS_ID BIGINT NOT NULL,
    PRIMARY KEY (SESSION_ID, INTERESTS_ID)
);
CREATE TABLE Session_Member
(
    SESSIONS_ID BIGINT NOT NULL,
    SPEAKERS_ID BIGINT NOT NULL,
    PRIMARY KEY (SESSIONS_ID, SPEAKERS_ID)
);
CREATE TABLE SharedLink
(
    ID BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL,
    URL VARCHAR(250) NOT NULL,
    NAME VARCHAR(50) NOT NULL,
    ORDERNUM INTEGER NOT NULL,
    MEMBER_ID BIGINT NOT NULL
);
CREATE TABLE Vote
(
    ID BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL,
    VALUE BOOLEAN NOT NULL,
    MEMBER_ID BIGINT,
    SESSION_ID BIGINT
);

CREATE TABLE Account
(
    ID BIGINT AUTO_INCREMENT PRIMARY KEY NOT NULL,
    oauthId VARCHAR(255),
    provider VARCHAR(255),
    name VARCHAR(255),
    firstname VARCHAR(255),
    lastname VARCHAR(255),
    password VARCHAR(255),
    token VARCHAR(255),
    login VARCHAR(255),
    email VARCHAR(255),
    registeredAt DATETIME,
    defaultLanguage VARCHAR(5),
    valid BOOLEAN,
    MEMBER_ID BIGINT
);
CREATE TABLE Account_Authority
(
    ACCOUNT_ID BIGINT NOT NULL,
    AUTHORITIES_ID BIGINT NOT NULL,
    PRIMARY KEY (ACCOUNT_ID, AUTHORITIES_ID)
);


ALTER TABLE Account ADD FOREIGN KEY (MEMBER_ID) REFERENCES Member (ID);
ALTER TABLE Article ADD FOREIGN KEY (AUTHOR_ID) REFERENCES Member (ID);
CREATE INDEX FK_I83UTKPQPTS0YRSY4YDQOCRJ1_INDEX_F ON Article (AUTHOR_ID);
ALTER TABLE ArticleComment ADD FOREIGN KEY (ARTICLE_ID) REFERENCES Article (ID);
ALTER TABLE ArticleComment ADD FOREIGN KEY (MEMBER_ID) REFERENCES Member (ID);
CREATE INDEX FK_ATSU0CSTQXORIS7YCDG34FSWN_INDEX_1 ON ArticleComment (MEMBER_ID);
CREATE INDEX FK_AVS081D85MIEX4N67V7C5S8CW_INDEX_1 ON ArticleComment (ARTICLE_ID);
ALTER TABLE Member_Event ADD FOREIGN KEY (EVENTS_ID) REFERENCES Event (ID);
ALTER TABLE Member_Event ADD FOREIGN KEY (MEMBER_ID) REFERENCES Member (ID);
CREATE INDEX FK_JRP4A4XBP5F1104QCU4RU7WHL_INDEX_B ON Member_Event (EVENTS_ID);
ALTER TABLE Member_Interest ADD FOREIGN KEY (INTERESTS_ID) REFERENCES Interest (ID);
ALTER TABLE Member_Interest ADD FOREIGN KEY (MEMBER_ID) REFERENCES Member (ID);
CREATE INDEX FK_S1VKU5CHUXOD57D3X700OASQV_INDEX_5 ON Member_Interest (INTERESTS_ID);
ALTER TABLE Session ADD FOREIGN KEY (EVENT_ID) REFERENCES Event (ID);
CREATE INDEX FK_57X1HYKABJNYXHBTRXBUD3SFY_INDEX_A ON Session (EVENT_ID);
ALTER TABLE SessionComment ADD FOREIGN KEY (MEMBER_ID) REFERENCES Member (ID);
ALTER TABLE SessionComment ADD FOREIGN KEY (SESSION_ID) REFERENCES Session (ID);
ALTER TABLE Account_Authority ADD FOREIGN KEY (ACCOUNT_ID) REFERENCES Account (ID);
ALTER TABLE Account_Authority ADD FOREIGN KEY (AUTHORITIES_ID) REFERENCES Authority (ID);
CREATE INDEX FK_DO57TL76PDOYNECXJ0KT1LRG6_INDEX_B ON SessionComment (SESSION_ID);
CREATE INDEX FK_FE7JMD8XPVHCQWGJ9JY5IT15N_INDEX_B ON SessionComment (MEMBER_ID);
ALTER TABLE Session_Interest ADD FOREIGN KEY (INTERESTS_ID) REFERENCES Interest (ID);
ALTER TABLE Session_Interest ADD FOREIGN KEY (SESSION_ID) REFERENCES Session (ID);
CREATE INDEX FK_SFT1JGIN7E4O0X558JPYUR1MA_INDEX_D ON Session_Interest (INTERESTS_ID);
ALTER TABLE Session_Member ADD FOREIGN KEY (SPEAKERS_ID) REFERENCES Member (ID);
ALTER TABLE Session_Member ADD FOREIGN KEY (SESSIONS_ID) REFERENCES Session (ID);
CREATE INDEX FK_1HW59BB9NJR35MBFY8HNSL4P9_INDEX_8 ON Session_Member (SPEAKERS_ID);
ALTER TABLE SharedLink ADD FOREIGN KEY (MEMBER_ID) REFERENCES Member (ID);
CREATE INDEX FK_JMWRLMEQKS9K6YLWM3L9OS4OW_INDEX_B ON SharedLink (MEMBER_ID);
ALTER TABLE Vote ADD FOREIGN KEY (MEMBER_ID) REFERENCES Member (ID);
ALTER TABLE Vote ADD FOREIGN KEY (SESSION_ID) REFERENCES Session (ID);
CREATE INDEX FK_2C2FFF78WIGPLG6SSA2JVCVPA_INDEX_2 ON Vote (MEMBER_ID);
CREATE INDEX FK_J9FXUBHACYP33YOVI4RJ6QF8O_INDEX_2 ON Vote (SESSION_ID);
